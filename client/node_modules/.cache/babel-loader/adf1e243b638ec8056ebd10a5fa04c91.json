{"ast":null,"code":"var _jsxFileName = \"/Users/simonemesiha/Desktop/CSE316-HW3-Spring21-Solution-main/client/src/components/modals/CreateAccount.js\";\nimport React, { useState } from 'react';\nimport { REGISTER } from '../../cache/mutations';\nimport { useMutation } from '@apollo/client';\nimport { WModal, WMHeader, WMMain, WMFooter, WButton, WInput, WRow, WCol } from 'wt-frontend';\n\nconst CreateAccount = props => {\n  const [input, setInput] = useState({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: ''\n  });\n  const [loading, toggleLoading] = useState(false);\n  const [Register] = useMutation(REGISTER);\n\n  const updateInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    const updated = { ...input,\n      [name]: value\n    };\n    setInput(updated);\n  };\n\n  const handleCreateAccount = async e => {\n    for (let field in input) {\n      if (!input[field]) {\n        alert('All fields must be filled out to register');\n        return;\n      }\n    }\n\n    const {\n      loading,\n      error,\n      data\n    } = await Register({\n      variables: { ...input\n      }\n    });\n\n    if (loading) {\n      toggleLoading(true);\n    }\n\n    ;\n\n    if (error) {\n      return `Error: ${error.message}`;\n    }\n\n    ;\n\n    if (data) {\n      console.log(data);\n      toggleLoading(false);\n\n      if (data.register.email === 'already exists') {\n        alert('User with that email already registered');\n      } else {\n        props.fetchUser();\n      }\n\n      props.setShowCreate(false);\n    }\n\n    ;\n  };\n\n  return /*#__PURE__*/React.createElement(WModal, {\n    className: \"signup-modal\",\n    cover: \"true\",\n    visible: props.setShowCreate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(WMHeader, {\n    className: \"modal-header\",\n    onClose: () => props.setShowCreate(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }\n  }, \"Sign Up\"), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(WMMain, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(WRow, {\n    className: \"modal-col-gap signup-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(WCol, {\n    size: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(WInput, {\n    className: \"\",\n    onBlur: updateInput,\n    name: \"firstName\",\n    labelAnimation: \"up\",\n    barAnimation: \"solid\",\n    labelText: \"First Name\",\n    wType: \"outlined\",\n    inputType: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(WCol, {\n    size: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(WInput, {\n    className: \"\",\n    onBlur: updateInput,\n    name: \"lastName\",\n    labelAnimation: \"up\",\n    barAnimation: \"solid\",\n    labelText: \"Last Name\",\n    wType: \"outlined\",\n    inputType: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 10\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 8\n    }\n  }, \"\\xA0\"), /*#__PURE__*/React.createElement(WInput, {\n    className: \"modal-input\",\n    onBlur: updateInput,\n    name: \"email\",\n    labelAnimation: \"up\",\n    barAnimation: \"solid\",\n    labelText: \"Email Address\",\n    wType: \"outlined\",\n    inputType: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 8\n    }\n  }, \"\\xA0\"), /*#__PURE__*/React.createElement(WInput, {\n    className: \"modal-input\",\n    onBlur: updateInput,\n    name: \"password\",\n    labelAnimation: \"up\",\n    barAnimation: \"solid\",\n    labelText: \"Password\",\n    wType: \"outlined\",\n    inputType: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(WMFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(WButton, {\n    className: \"modal-button\",\n    onClick: handleCreateAccount,\n    span: true,\n    clickAnimation: \"ripple-light\",\n    hoverAnimation: \"darken\",\n    shape: \"rounded\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, \"Submit\")));\n};\n\nexport default CreateAccount;","map":{"version":3,"sources":["/Users/simonemesiha/Desktop/CSE316-HW3-Spring21-Solution-main/client/src/components/modals/CreateAccount.js"],"names":["React","useState","REGISTER","useMutation","WModal","WMHeader","WMMain","WMFooter","WButton","WInput","WRow","WCol","CreateAccount","props","input","setInput","email","password","firstName","lastName","loading","toggleLoading","Register","updateInput","e","name","value","target","updated","handleCreateAccount","field","alert","error","data","variables","message","console","log","register","fetchUser","setShowCreate"],"mappings":"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","sourcesContent":["import React, { useState } \tfrom 'react';\nimport { REGISTER }\t\t\tfrom '../../cache/mutations';\nimport { useMutation }    \tfrom '@apollo/client';\n\nimport { WModal, WMHeader, WMMain, WMFooter, WButton, WInput, WRow, WCol } from 'wt-frontend';\n\nconst CreateAccount = (props) => {\n\tconst [input, setInput] = useState({ email: '', password: '', firstName: '', lastName: '' });\n\tconst [loading, toggleLoading] = useState(false);\n\tconst [Register] = useMutation(REGISTER);\n\n\t\n\tconst updateInput = (e) => {\n\t\tconst { name, value } = e.target;\n\t\tconst updated = { ...input, [name]: value };\n\t\tsetInput(updated);\n\t};\n\n\tconst handleCreateAccount = async (e) => {\n\t\tfor (let field in input) {\n\t\t\tif (!input[field]) {\n\t\t\t\talert('All fields must be filled out to register');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tconst { loading, error, data } = await Register({ variables: { ...input } });\n\t\tif (loading) { toggleLoading(true) };\n\t\tif (error) { return `Error: ${error.message}` };\n\t\tif (data) {\n\t\t\tconsole.log(data)\n\t\t\ttoggleLoading(false);\n\t\t\tif(data.register.email === 'already exists') {\n\t\t\t\talert('User with that email already registered');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprops.fetchUser();\n\t\t\t}\n\t\t\tprops.setShowCreate(false);\n\n\t\t};\n\t};\n\n\treturn (\n\t\t<WModal className=\"signup-modal\"  cover=\"true\" visible={props.setShowCreate}>\n\t\t\t<WMHeader  className=\"modal-header\" onClose={() => props.setShowCreate(false)}>\n\t\t\t\tSign Up\n\t\t\t</WMHeader>\n\n\t\t\t{\n\t\t\t\tloading ? <div />\n\t\t\t\t\t: <WMMain>\n\t\t\t\t\t\t\t<WRow className=\"modal-col-gap signup-modal\">\n\t\t\t\t\t\t\t\t<WCol size=\"6\">\n\t\t\t\t\t\t\t\t\t<WInput \n\t\t\t\t\t\t\t\t\t\tclassName=\"\" onBlur={updateInput} name=\"firstName\" labelAnimation=\"up\" \n\t\t\t\t\t\t\t\t\t\tbarAnimation=\"solid\" labelText=\"First Name\" wType=\"outlined\" inputType=\"text\" \n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</WCol>\n\t\t\t\t\t\t\t\t<WCol size=\"6\">\n\t\t\t\t\t\t\t\t\t<WInput \n\t\t\t\t\t\t\t\t\t\tclassName=\"\" onBlur={updateInput} name=\"lastName\" labelAnimation=\"up\" \n\t\t\t\t\t\t\t\t\t\tbarAnimation=\"solid\" labelText=\"Last Name\" wType=\"outlined\" inputType=\"text\" \n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</WCol>\n\t\t\t\t\t\t\t</WRow>\n\n\t\t\t\t\t\t\t<div className=\"modal-spacer\">&nbsp;</div>\n\t\t\t\t\t\t\t<WInput \n\t\t\t\t\t\t\t\tclassName=\"modal-input\" onBlur={updateInput} name=\"email\" labelAnimation=\"up\" \n\t\t\t\t\t\t\t\tbarAnimation=\"solid\" labelText=\"Email Address\" wType=\"outlined\" inputType=\"text\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"modal-spacer\">&nbsp;</div>\n\t\t\t\t\t\t\t<WInput \n\t\t\t\t\t\t\t\tclassName=\"modal-input\" onBlur={updateInput} name=\"password\" labelAnimation=\"up\" \n\t\t\t\t\t\t\t\tbarAnimation=\"solid\" labelText=\"Password\" wType=\"outlined\" inputType=\"password\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</WMMain>\n\t\t\t}\n\t\t\t<WMFooter>\n\t\t\t\t<WButton className=\"modal-button\" onClick={handleCreateAccount} span clickAnimation=\"ripple-light\" hoverAnimation=\"darken\" shape=\"rounded\" color=\"primary\">\n\t\t\t\t\tSubmit\n\t\t\t\t</WButton>\n\t\t\t</WMFooter>\n\t\t\t\n\t\t</WModal>\n\t);\n}\n\nexport default CreateAccount;\n"]},"metadata":{},"sourceType":"module"}